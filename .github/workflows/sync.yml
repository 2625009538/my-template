name: Sync to Gitee

on:
  push:
    branches: [ main ]  # 确保这里是你 GitHub 的主分支名称

jobs:
  mirror_to_gitee:
    runs-on: ubuntu-latest
    steps:
      # 第一步：下载代码（一定要 fetch-depth: 0 获取完整历史）
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      # 第二步：使用更稳定的镜像插件 (pixta-dev)
      - name: Mirror to Gitee
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          # 目标仓库地址 (格式：git@gitee.com:用户名/仓库名.git)
          # 我已经根据你的截图帮你填好了
          target_repo_url: git@gitee.com:zhang-chunxiao/12386.git
          
          # 你的私钥 (直接读取你之前配置好的 Secret)
          ssh_private_key: ${{ secrets.GITEE_PRIVATE_KEY }}
